#!/usr/bin/make -f

pkg		:= cl-unicode
debpkg  	:= cl-unicode

clc-source	:= usr/share/common-lisp/source
clc-systems	:= usr/share/common-lisp/systems
clc-files	:= $(clc-source)/$(pkg)


build:
	sbcl --load debian/build-cl-unicode.lisp

clean:
	rm -f lists.lisp hash-tables.lisp methods.lisp
	rm -f test/derived-properties
	dh_testdir
	dh_testroot
	dh_clean

install: build
	dh_testdir
	dh_testroot
	dh_prep
	dh_installdirs
	dh_install $(pkg).asd $(clc-files)
	dh_install *.lisp $(clc-files)
	dh_install build $(clc-files)
	dh_link $(clc-files)/$(pkg).asd $(clc-systems)/$(pkg).asd

binary-indep: install
	dh_testdir
	dh_testroot
	dh_installdocs doc/index.html
	dh_installchangelogs
	dh_lisp
	dh_compress
	dh_fixperms
	dh_installdeb
	dh_gencontrol
	dh_md5sums
	dh_builddeb

binary-arch:

binary: binary-indep


.PHONY: build clean binary-indep binary-arch binary install
